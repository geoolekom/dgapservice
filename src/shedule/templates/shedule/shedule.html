{% extends "core/base.html" %}
{% load bootstrap3 %}

{% block title %} Shedule {% endblock %}

{% block content %} 

<form method="get" class="form-inline">
	{% bootstrap_form_errors group_form %}
	{% bootstrap_form group_form %}
	<input class="btn btn-default btn-active" type="submit" value="Показать расписание!">
</form>

{% if object_list.count == 0 %}
	<div class="alert alert-danger fade in"> 
		<strong> У выбранной группы нет расписания. </strong>
		<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
	</div> 
	
{% else %}
	<ul class="nav nav-tabs">
		{% for day, day_name in days_of_week.items %}
			<li class="{% if day == today %} active {% endif %}"> <a data-toggle="tab" href="#{{ day }}"> {{ day_name }} </a> </li>
		{% endfor %}
	</ul>

	<div class="tab-content">
		{% for day, day_name in days_of_week.items %}
			<div id="{{ day}}" class="tab-pane fade {% if day == today %} in active {% endif %}">
				<div class="row">

					<div class="col-sm-8">
						<table class="table table-bordered">

							<thead>
								<tr class="info">
									<th width="5%">№</th>
									<th width="15%">Аудитория</th>
									<th width="55%">Предмет</th>
									<th width="25%">Преподаватель</th>
								</tr>
							</thead>

							<tbody>
								{% for lesson in object_list %}
									{% if lesson.day_of_week == day %}
										<tr class="success">
											<td align="center"> {{ lesson.lesson_number }} </td>
											<td align="center"> {{ lesson.room }} </td>
											<td> {{ lesson.lesson_title }} </td>
											<td> {{ lesson.teacher }} </td>
										</tr>
									{% endif %}
								{% endfor %}
							</tbody>

						</table>
					</div>
					<div class="col-sm-1"></div>
					<div class="col-sm-4">
						{% if user.is_staff and edit_form %}
							<form class="form" method="post" action="edit-lesson">
								{% csrf_token %}
								<div class="form-group">{% bootstrap_form_errors edit_form %}</div>
								<input type="number" name="day_of_week" value="{{day}}" hidden>
								<input type="text" name="group" value="{{group_form.group.value}}" hidden>
								{% bootstrap_field edit_form.lesson_number set_required=False %}
								{% bootstrap_field edit_form.lesson_title set_required=False %}
								{% bootstrap_field edit_form.teacher set_required=False %}
								{% bootstrap_field edit_form.room set_required=False %}
								<button type="submit" class="btn btn-primary">Сохранить</button>
							</form>
						{% endif %}
					</div>

				</div>
			</div>
		{% endfor %}
	</div>

{% endif %}

{% endblock %}